<?xml version='1.0' encoding='UTF-8'?>
<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item2" object-name="workflow:name=generic" id="7bbcbb76-c8cf-4ebe-a9af-df53491f9c06" version="0.0.1" api-version="6.0.0" allowed-operations="evf" restartMode="1" resumeFromFailedMode="0">
  <display-name><![CDATA[PrankCall-as-a-Service]]></display-name>
  <description><![CDATA[Autogenerated workflow.]]></description>
  <position y="20.0" x="180.0"/>
  <input>
    <param name="PhoneNumberToDial" type="String">
      <description><![CDATA[PhoneNumberToDial]]></description>
    </param>
    <param name="TextToSay" type="String">
      <description><![CDATA[TextToSay]]></description>
    </param>
  </input>
  <output>
    <param name="outHeaders" type="Properties">
      <description><![CDATA[Headers returned in the response.]]></description>
    </param>
    <param name="outParameters" type="Properties">
      <description><![CDATA[Parameters returned in the response.]]></description>
    </param>
  </output>
  <attrib name="errorCode" type="String" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
    <description><![CDATA[errorCode]]></description>
  </attrib>
  <attrib name="hostResource" type="ResourceElement" read-only="true">
    <value encoded="n"><![CDATA[dunes://service.dunes.ch/ResourceElement?id='e169dd72-beb4-4279-9716-1ca4b93e5d51'&dunesName='ResourceElement']]></value>
  </attrib>
  <attrib name="CallerID" type="String" read-only="false">
    <value encoded="n"><![CDATA[65012114]]></value>
    <description><![CDATA[CallerID]]></description>
  </attrib>
  <attrib name="CallerIDname" type="String" read-only="false">
    <value encoded="n"><![CDATA[Clement Wong]]></value>
    <description><![CDATA[CallerIDname]]></description>
  </attrib>
  <attrib name="VoiceID" type="String" read-only="false">
    <value encoded="n"><![CDATA[1]]></value>
    <description><![CDATA[VoiceID]]></description>
  </attrib>
  <attrib name="LicenseKey" type="String" read-only="false">
    <value encoded="n"><![CDATA[ced708d8-acb2-4290-b6c2-f4c198b7abcf]]></value>
    <description><![CDATA[LicenseKey]]></description>
  </attrib>
  <workflow-item name="item0" type="end" end-mode="0">
    <position y="150.0" x="180.0"/>
  </workflow-item>
  <workflow-item name="item1" throw-bind-name="errorCode" type="end" end-mode="1">
    <position y="90.0" x="340.0"/>
  </workflow-item>
  <workflow-item name="item2" out-name="item0" catch-name="item1" throw-bind-name="errorCode" type="task">
    <display-name><![CDATA[Scripting]]></display-name>
    <script encoded="false"><![CDATA[var host = Server.findForType("SOAP:Host", "cb18919b-efb8-4f36-bd9b-a3a9415e9b4a");
if (host == null) throw "Host 'cb18919b-efb8-4f36-bd9b-a3a9415e9b4a' not found!";

var operation = host.getOperation("NotifyPhoneBasic");
if (operation == null) throw "Operation 'NotifyPhoneBasic' not found!";

function formatDate(inDate){
  if (!inDate) {
     return null;
  }
  dateRfc822 = System.formatDate(inDate, "yyyy-MM-dd'T'HH:mm:ssZ")
  return dateRfc822;
}

System.log("creating request...");
var request = operation.createSOAPRequest();

request.setInParameter("PhoneNumberToDial",PhoneNumberToDial);
request.setInParameter("TextToSay",TextToSay);
request.setInParameter("CallerID",CallerID);
request.setInParameter("CallerIDname",CallerIDname);
request.setInParameter("VoiceID",VoiceID);
request.setInParameter("LicenseKey",LicenseKey);

System.log("invoking '" + operation.name + "' operation...");
var response = operation.invoke(request);
System.log("operation '" + operation.name + "' successfully invoked.");

System.log("processing response...");
var result = new Properties();

System.log("out headers...");
outHeaders = System.getModule("com.vmware.library.soap").processOutHeaders(response);

System.log("out parameters...");
outParameters = System.getModule("com.vmware.library.soap").processOutParameters(response);
]]></script>
    <in-binding>
      <bind name="PhoneNumberToDial" type="String" export-name="PhoneNumberToDial">
        <description><![CDATA[PhoneNumberToDial]]></description>
      </bind>
      <bind name="TextToSay" type="String" export-name="TextToSay">
        <description><![CDATA[TextToSay]]></description>
      </bind>
      <bind name="CallerID" type="String" export-name="CallerID">
        <description><![CDATA[CallerID]]></description>
      </bind>
      <bind name="CallerIDname" type="String" export-name="CallerIDname">
        <description><![CDATA[CallerIDname]]></description>
      </bind>
      <bind name="VoiceID" type="String" export-name="VoiceID">
        <description><![CDATA[VoiceID]]></description>
      </bind>
      <bind name="LicenseKey" type="String" export-name="LicenseKey">
        <description><![CDATA[LicenseKey]]></description>
      </bind>
      <bind name="hostResource" type="ResourceElement" export-name="hostResource"/>
    </in-binding>
    <out-binding>
      <bind name="outHeaders" type="Properties" export-name="outHeaders">
        <description><![CDATA[Headers returned in the response.]]></description>
      </bind>
      <bind name="outParameters" type="Properties" export-name="outParameters">
        <description><![CDATA[Parameters returned in the response.]]></description>
      </bind>
    </out-binding>
    <position y="100.0" x="140.0"/>
  </workflow-item>
  <presentation>
    <p-step>
      <title><![CDATA[PrankCall-as-a-Service]]></title>
      <p-group>
        <title><![CDATA[Inputs]]></title>
        <desc><![CDATA[Input parameters used by the SOAP operation.]]></desc>
        <p-param name="PhoneNumberToDial">
          <desc><![CDATA[PhoneNumberToDial]]></desc>
        </p-param>
        <p-param name="TextToSay">
          <desc><![CDATA[TextToSay]]></desc>
        </p-param>
      </p-group>
    </p-step>
  </presentation>
</workflow>